!function e(n,i,t){function o(s,l){if(!i[s]){if(!n[s]){var r="function"==typeof require&&require;if(!l&&r)return r(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[s]={exports:{}};n[s][0].call(u.exports,function(e){var i=n[s][1][e];return o(i||e)},u,u.exports,e,n,i,t)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<t.length;s++)o(t[s]);return o}({1:[function(e,n,i){"use strict";!function(){function e(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i}console.log("base/event.js loaded."),"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}()},{}],2:[function(e,n,i){"use strict";!function(){console.log("base/query.js loaded.");var e,n=window.document,i=/^(#?[\w-]+|\.[\w-.]+)$/,t=/\./g,o=[].slice;window.query=function(a,s){if(s=s||n,i.test(a))switch(a.charAt(0)){case"#":return[s.getElementById(a.substr(1))];case".":return e=a.substr(1).replace(t," "),o.call(s.getElementsByClassName(e));default:return o.call(s.getElementsByTagName(a))}return o.call(s.querySelectorAll(a))}}()},{}],3:[function(e,n,i){"use strict";!function(){console.log("base/raf.js loaded.");for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[n[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[i]+"CancelAnimationFrame"]||window[n[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,i){var t=(new Date).getTime(),o=Math.max(0,16-(t-e)),a=window.setTimeout(function(){n(t+o)},o);return e=t+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},{}],4:[function(e,n,i){"use strict";e("../base/raf"),e("../base/event"),e("../base/query"),function(){var i=e("../inline-video.config");console.log("components/inline-video.component.js loaded."),n.exports=function(e){function n(n){var i=document.createElement("img");return i.setAttribute("alt",""),i.setAttribute("src",e.source[n]+"layout.png"),i.style.backgroundImage="url('"+e.source[n]+"first.jpg')",i.classList.add(S.image.default),i.classList.add(S.image[n]),i}function t(n){var i=document.createElement("canvas");return i.setAttribute("alt",""),i.setAttribute("data-src",e.source[n]),i.style.backgroundImage="url('"+e.source[n]+"first.jpg')",i.classList.add(S.canvas),i}function o(n){var i=document.createElement("img");return i.setAttribute("alt",""),i.setAttribute("data-src",e.source[n]+"video.gif"),i.style.backgroundImage="url('"+e.source[n]+"first.jpg')",i.classList.add(S.gif),i}function a(){q=!0;var e=new CustomEvent("inline-video.onLoad",{detail:null});O.main.dispatchEvent(e)}function s(){P=!0;var e=new CustomEvent("inline-video.onPlay",{detail:null});O.main.dispatchEvent(e)}function l(){P=!1;var e=new CustomEvent("inline-video.onStop",{detail:null});O.main.dispatchEvent(e)}function r(e){var n=e.parentNode;n&&n.nodeName&&n.nodeType||O.main.appendChild(e)}function d(e){var n=e.parentNode;n&&n.nodeName&&n.nodeType&&O.main.removeChild(e)}function u(e){v(),a()}function c(){O.video.addEventListener("canplay",u)}function v(){O.video.removeEventListener("canplay",u)}function f(){if(O.video){N&&r(O.video);var e=O.video.getAttribute("src");e&&e.length?O.video.play():(v(),c(),e=O.video.getAttribute("data-src"),O.video.setAttribute("src",e),O.video.removeAttribute("data-src"),O.video.volume=0,O.video.play())}}function m(){if(O.video){var e=O.video.getAttribute("src");e&&e.length&&O.video.pause(),N&&d(O.video)}}function g(e){C.player.play(),C.isLoading=!1,C.hasLoaded=!0,b(),a()}function p(){O.canvas.addEventListener("whitewaterload",g)}function b(){O.canvas.removeEventListener("whitewaterload",g)}function w(){if(O.canvas)if(T&&r(O.canvas),null!=C.player&&C.hasLoaded)C.player.play();else if(null!=C.player&&C.isLoading)b(),p();else{var e=O.canvas.getAttribute("data-src");C.player=new Whitewater(O.canvas,e,C.options),O.canvas.removeAttribute("data-src"),C.isLoading=!0,C.hasLoaded=!1,O.canvas.addEventListener("whitewaterload",g)}}function h(){O.canvas&&(null!=C.player&&C.hasLoaded&&C.player.pause(),T&&d(O.canvas))}function y(e){k(),a()}function E(){O.gif.addEventListener("load",y)}function k(){O.gif.removeEventListener("load",y)}function L(){if(O.gif){r(O.gif);var e=O.gif.getAttribute("src");e&&e.length||(k(),E(),e=O.gif.getAttribute("data-src"),O.gif.setAttribute("src",e),O.gif.removeAttribute("data-src"))}}function A(){if(O.gif){var e=O.gif.getAttribute("src");e&&e.length,d(O.gif)}}var O={main:null,image:{desktop:null,tablet:null,mobile:null},layout:null,canvas:null,video:null,gif:null},S={main:"inline-video",image:{default:"inline-video__image",desktop:"inline-video__image--desktop",tablet:"inline-video__image--tablet",mobile:"inline-video__image--mobile"},layout:"inline-video__layout",canvas:"inline-video__canvas",video:"inline-video__video",gif:"inline-video__gif"},C={player:null,options:{loop:!0},isLoading:!1,hasLoaded:!1},x=!1,I=!1,P=!1,q=!1,N=!1,T=!1;return e&&e.element&&e.element.nodeName&&e.element.nodeType&&e&&e.source&&e.source.desktop&&e.source.desktop.length&&e.source.tablet&&e.source.tablet.length&&e.source.mobile&&e.source.mobile.length?(1==e.removeVideoOnStop&&(N=!0),1==e.removeCanvasOnStop&&(T=!0),O.main=e.element,O.main.classList.add(S.main),O.image.desktop=n("desktop"),O.image.tablet=n("tablet"),O.image.mobile=n("mobile"),O.layout=function(){var e=document.createElement("div");return e.classList.add(S.layout),e}(),i.device.isPhone?i.device.isAndroidOld||i.device.isIOSOld?O.gif=o("mobile"):O.canvas=t("mobile"):i.device.isTablet?i.device.isAndroidOld||i.device.isIOSOld?O.gif=o("tablet"):O.canvas=t("tablet"):O.video=function(n){var i=document.createElement("video");return i.setAttribute("alt",""),i.setAttribute("loop",""),i.setAttribute("muted",""),i.setAttribute("data-src",e.source[n]+"video.mp4"),i.style.backgroundImage="url('"+e.source[n]+"first.jpg')",i.setAttribute("poster",e.source[n]+"first.jpg"),i.classList.add(S.video),i}("desktop"),O.main.innerHtml="",O.layout.appendChild(O.image.desktop),O.layout.appendChild(O.image.tablet),O.layout.appendChild(O.image.mobile),O.main.appendChild(O.layout),O.canvas&&!T&&O.main.appendChild(O.canvas),O.video&&!N&&O.main.appendChild(O.video),setTimeout(function(){x=!0;var e=new CustomEvent("inline-video.onReady",{detail:null});O.main.dispatchEvent(e)},i.timeout.scope),{play:function(){P||I||(O.video?f():O.gif?L():O.canvas&&w(),s())},stop:function(){P&&(O.video?m():O.gif?A():O.canvas&&h(),l())},lock:function(){I||(I=!0,console.log("INLINE VIDEO MESSAGE: The inline video is now locked and cannot be played."))},unlock:function(){I&&(I=!1,console.log("INLINE VIDEO MESSAGE: The inline video is now unlocked and can be played."))},isReady:function(){return x},isLocked:function(){return I},isPlaying:function(){return P},hasLoaded:function(){return q}}):(console.log("INLINE VIDEO ERROR: Cannot create inline video with invalid options."),null)}}()},{"../base/event":1,"../base/query":2,"../base/raf":3,"../inline-video.config":5}],5:[function(e,n,i){"use strict";e("./base/query"),function(){function e(e){function n(){return-1!=e.indexOf("m.localhost")||-1!=e.indexOf("m.amazonaws")||-1!=e.indexOf("m.skoda")||-1!=e.indexOf("m.mcdonalds")||-1!=e.indexOf("m.volkswagen")}var i=this;i.isProd=!0,i.isDeploy=!0,null!=e&&void 0!==e||(e=window.location.host),i.isMobile=n(),i.isDesktop=!n()}function i(){function e(){return"desktop-lg-up"==l.value}function n(){return e()||"desktop"==l.value}function i(){return t()||"tablet"==l.value}function t(){return"tablet-sm"==l.value}function o(){return a()||"mobile"==l.value}function a(){return"mobile-sm"==l.value}function s(){l.value=window.getComputedStyle(query("body")[0],":before").getPropertyValue("content").replace(/\"/g,""),e()?l.isDesktopLarge=!0:l.isDesktopLarge=!1,n()?l.isDesktop=!0:l.isDesktop=!1,i()?l.isTablet=!0:l.isTablet=!1,t()?l.isTabletSmall=!0:l.isTabletSmall=!1,o()?l.isMobile=!0:l.isMobile=!1,a()?l.isMobileSmall=!0:l.isMobileSmall=!1}var l=this;l.value=null,l.isDesktopLarge=!1,l.isDesktop=!1,l.isTablet=!1,l.isTabletSmall=!1,l.isMobile=!1,l.isMobileSmall=!1,window.addEventListener("resize",function(e){s()}),s()}console.log("inline-video.config.js loaded."),n.exports=new function(){function n(){return!!m&&-1!=m.toLowerCase().indexOf("ios")}function t(){return!!m&&-1!=m.toLowerCase().indexOf("android")}function o(){return!isNaN(v.version("Chrome"))}function a(){var e=navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var t=e.indexOf("Edge/");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}function s(){return-1!=window.location.host.indexOf("localhost:")}function l(){return-1!=window.location.host.indexOf(".skoda")}function r(){return-1!=window.location.host.indexOf(".mcdonalds")}function d(){return-1!=window.location.host.indexOf(".volkswagen")}function u(){return-1!=window.location.host.indexOf("au.skoda.com.au")}function c(){return-1!=window.location.host.indexOf("au.volkswagen.com.au")}var v=new MobileDetect(navigator.userAgent),f=new e(window.location.host),m=v.os(),g="/src/",p="/dist/",b="",w="/inline-video",h=window.location.protocol+"//"+window.location.hostname,y=new i;return f.isDeploy&&(r()&&(b=""),d()&&(b=""),g=p=b,w=""),{device:{isPhone:null!=v.phone(),isTablet:null!=v.tablet()||f.isMobile,isMobile:null!=v.mobile()||f.isMobile,isIOS:n(),isAndroid:t(),isIOSOld:!!m&&n()&&parseFloat(v.version("iOS"))<9,isAndroidOld:!!m&&t()&&parseFloat(v.version("Android"))<6},browser:{isFirefox:!isNaN(v.version("Firefox")),isChrome:o(),isSafari:!isNaN(v.version("Safari"))&&!o(),isIE:function(){try{return parseInt(a())>0}catch(e){return!1}}(),isIEOld:function(){try{return parseInt(a())<=11}catch(e){return!1}}()},breakpoint:y,environment:{isProd:f.isProd,isDeploy:f.isDeploy,isLocalHost:s(),isAmazonHost:-1!=window.location.host.indexOf(".amazonaws"),isSkodaHost:l(),isMcDonaldsHost:r(),isVolkswagenHost:d(),isSkodaProd:u(),isSkodaStage:l()&&!u(),isVolkswagenProd:c(),isVolkswagenStage:d()&&!c()},path:{url:w+(s(),""),root:h+(s()?":"+window.location.port:""),skoda:l()?"":"https://stage-au.skodaaustralia.net",volkswagen:d()?"":"https://au.volkswagen.tribalstage.com",views:f.isProd?p+"static/views/":g+"static/views/",templates:f.isProd?p+"static/templates/":g+"static/templates/",data:f.isProd?p+"data/":g+"data/",images:f.isProd?p+"assets/images/":g+"assets/images/",videos:f.isProd?p+"assets/videos/":g+"assets/videos/",scripts:f.isProd?p+"js/":g+"js/"},animation:{delay:250,duration:500,durationSlow:650,durationFast:300,durationInstant:200},timeout:{scope:250,animation:550}}}}()},{"./base/query":2}],6:[function(e,n,i){"use strict";e("./base/raf"),e("./base/event"),e("./base/query");var t=e("./components/inline-video.component");window.InlineVideo=t,function(){function n(e){e.classList;var n=getComputedStyle(e),i=e.getBoundingClientRect();return"none"!=n.display&&i.left>=0-i.width/2&&i.right<=(window.innerWidth||_elHtml.clientWidth)+i.width/2&&i.top>=0-i.height/2&&i.bottom<=(window.innerHeight||_elHtml.clientHeight)+i.height/2}var i=e("./inline-video.config");console.log("inline-video.plugin.js loaded.");var o=[];query(".inline-video--test").forEach(function(e,n){var a=null;e.addEventListener("inline-video.onReady",function(e){console.log("inline-video.onReady callback triggered."),console.log("video.isReady(): "+a.isReady()),console.log(e)}),e.addEventListener("inline-video.onLoad",function(e){console.log("inline-video.onLoad callback triggered."),console.log("video.hasLoaded(): "+a.hasLoaded()),console.log(e)}),a=new t({element:e,source:{desktop:i.path.videos+"desktop/",tablet:i.path.videos+"tablet/",mobile:i.path.videos+"mobile/"},removeVideoOnStop:!1,removeCanvasOnStop:!1}),e.addEventListener("inline-video.onPlay",function(e){console.log("inline-video.onPlay callback triggered."),console.log("video.isPlaying(): "+a.isPlaying()),console.log(e)}),e.addEventListener("inline-video.onStop",function(e){console.log("inline-video.onStop callback triggered."),console.log("video.isPlaying(): "+a.isPlaying()),console.log(e)}),o.push({element:e,video:a})}),o&&o.length&&(window.addEventListener("scroll",function(){o.forEach(function(e,i){var t=e.video;n(e.element)?t.isPlaying()||t.play():t.isPlaying()&&t.stop()})}),setTimeout(function(){var e=new CustomEvent("scroll");window.dispatchEvent(e)},i.timeout.scope))}()},{"./base/event":1,"./base/query":2,"./base/raf":3,"./components/inline-video.component":4,"./inline-video.config":5}]},{},[6]);
